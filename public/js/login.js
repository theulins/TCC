document.getElementById('loginForm').addEventListener('submit', async (e)=>{e.preventDefault(); const body={email:email.value.trim(), password:password.value}; const r=await fetch('/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)}); const d=await r.json(); if(r.ok&&d.token){ setToken(d.token); location.href='/dashboard.html'; } else { toast(d.error||'Falha ao autenticar'); }});